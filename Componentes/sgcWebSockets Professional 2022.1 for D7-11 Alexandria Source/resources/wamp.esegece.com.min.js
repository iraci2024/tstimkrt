/*!
**************************************************************************
 sgcWebSocket component

 written by eSeGeCe
            copyright Â© 2021
            Email : info@esegece.com
            Web : http://www.esegece.com
**************************************************************************
*/

function sgcws_wamp(){if(0!=arguments.length){1==arguments.length?"object"==typeof arguments[0]?(arguments[0].subprotocol="WAMP",sgcWebSocket.call(this,arguments[0])):"string"==typeof arguments[0]&&(arguments[1]="WAMP",sgcWebSocket.call(this,arguments[0],arguments[1])):2==arguments.length?"object"==typeof arguments[0]?(arguments[0].subprotocol=arguments[1]+".WAMP",sgcWebSocket.call(this,arguments[0])):"string"==typeof arguments[0]&&(arguments[1]=arguments[1]+".WAMP",sgcWebSocket.call(this,arguments[0],arguments[1])):3==arguments.length&&("object"==typeof arguments[0]?(arguments[0].subprotocol=arguments[1]+".WAMP",arguments[0].transport=arguments[2],sgcWebSocket.call(this,arguments[0])):"string"==typeof arguments[0]&&(arguments[1]=arguments[1]+".WAMP",sgcWebSocket.call(this,arguments[0],arguments[1],arguments[2])));var e=this.send;this.prefix=function(s,t){arguments[0]=JSON.stringify([1,s,t]),e.apply(this,arguments)},this.call=function(s,t,o){""==s&&(s=GUID()),arguments[0]=JSON.stringify([2,s,t,o]),e.apply(this,arguments)},this.cancelcall=function(s){""==s&&(s=GUID()),arguments[0]=JSON.stringify([1001,s]),e.apply(this,arguments)},this.subscribe=function(s){arguments[0]=JSON.stringify([5,s]),e.apply(this,arguments)},this.unsubscribe=function(s){arguments[0]=JSON.stringify([6,s]),e.apply(this,arguments)},this.publish=function(s,t,o,n){arguments[0]=JSON.stringify([7,s,t,o,n]),e.apply(this,arguments)};var s=new event("onsgcmessage"),t=new event("onwampwelcome"),o=new event("onwampcallresult"),n=new event("onwampcallprogressresult"),l=new event("onwampcallerror"),r=new event("onwampevent");DoEventMessage=function(e){var a=e.data;obj=JSON.parse(a),0==obj[0]?t.fire({name:"onwampwelcome",SessionId:obj[1],ProtocolVersion:obj[2],ServerIdent:obj[3]}):3==obj[0]?o.fire({name:"onwampcallresult",CallId:obj[1],CallResult:obj[2]}):1e3==obj[0]?n.fire({name:"onwampcallprogressresult",CallId:obj[1],CallResult:obj[2]}):4==obj[0]?l.fire({name:"onwampcallerror",CallId:obj[1],ErrorURI:obj[2],ErrorDesc:obj[3],ErrorDetails:obj[4]}):8==obj[0]?r.fire({name:"onwampevent",TopicURI:obj[1],Event:obj[2]}):s.fire({name:"onsgmessage",message:event.message})};var a=this.on;this.on=function(e,c){"sgcmessage"==e?s.subscribe(c):"wampwelcome"==e?t.subscribe(c):"wampcallresult"==e?o.subscribe(c):"wampcallprogressresult"==e?n.subscribe(c):"wampcallerror"==e?l.subscribe(c):"wampevent"==e?r.subscribe(c):a.apply(this,arguments)}}}sgcws_wamp.prototype=new sgcWebSocket,sgcws_wamp.prototype.constructor=sgcws_wamp;